# RO-CASE ARCHIVE SYSTEM - TODO List

## Phase 1: قاعدة البيانات ونظام الصلاحيات
- [x] تصميم جداول قاعدة البيانات (القضايا، اللاعبين، الأدلة، الملاحظات، سجل التدقيق)
- [x] إضافة نظام الصلاحيات الخمسة (Admin, Judge, Investigator, Officer, Viewer)
- [x] إنشاء دوال قاعدة البيانات في server/db.ts
- [x] تطوير tRPC procedures للصلاحيات والمستخدمين

## Phase 2: الواجهة الأمامية والتصميم
- [x] تطبيق نظام الألوان Dark Mode (#030B16, #071C2F, #0E2F4A, #1177FF)
- [x] إنشاء DashboardLayout مخصص بتصميم احترافي
- [x] تصميم مكونات UI مخصصة (بطاقات، أزرار، نماذج)
- [x] إضافة خطوط مناسبة وتحسين التجربة البصرية

## Phase 3: نظام إدارة القضايا
- [x] نموذج إنشاء قضية جديدة (معلومات المتهم، المشتكي، نوع الجريمة)
- [x] نظام توليد رقم القضية الفريد (RC-YYYY-XXXXX)
- [x] صفحة عرض تفاصيل القضية الكاملة
- [x] نظام رفع وإدارة الأدلة (صور، فيديو، روابط)
- [x] نظام الملاحظات والتعليقات على القضايا
- [x] تحديث حالة القضية (مفتوحة، قيد التحقيق، مغلقة)

## Phase 4: الملفات الجنائية ونظام البحث
- [x] صفحة الملف الجنائي للاعب (عدد القضايا، الإدانات، التبرئات)
- [x] نظام البحث المتقدم (اسم، Roblox ID، رقم القضية)
- [x] فلترة القضايا (نوع الجريمة، التاريخ، الحالة)
- [x] عرض تاريخ القضايا الكامل للاعب

## Phase 5: لوحة التحكم والإحصائيات
- [x] Dashboard رئيسي يعرض القضايا المفتوحة/قيد التحقيق/المغلقة
- [x] قائمة أعلى 10 مخالفين
- [x] إحصائيات نشاط الفريق
- [x] رسوم بيانية وتقارير شاملة

## Phase 6: نظام المحكمة وسجل التدقيق
- [x] واجهة القاضي لمراجعة القضايا
- [x] نظام إصدار الأحكام وتحديد العقوبات
- [x] زر Finalize Case لإغلاق القضية نهائياً
- [x] سجل التدقيق (Audit Log) غير قابل للتلاعب
- [x] تسجيل كل عملية (من، متى، ماذا)

## Phase 7: تكامل Discord
- [ ] إعداد بوت Discord للنظام (يتطلب إعداد خارجي)
- [ ] أمر /case create لرفع القضايا من Discord (يتطلب بوت)
- [ ] إرسال إشعارات تلقائية للأحكام (يتطلب بوت)
- [x] ربط Discord ID مع حسابات المستخدمين (جاهز في قاعدة البيانات)

## Phase 8: الأمان والاختبار
- [x] التحقق من صلاحيات المستخدمين في كل عملية
- [x] منع التلاعب والحذف غير المصرح به
- [x] اختبار جميع الوظائف
- [ ] كتابة اختبارات Vitest للوظائف الحرجة


## تعديلات جديدة
- [x] تغيير اسم صلاحية "Viewer" إلى "Member" (عضو)
- [x] تعديل صلاحيات "Member" للسماح بفتح القضايا فقط

## نظام طلبات القضايا (Case Requests)
- [x] إنشاء جدول case_requests في قاعدة البيانات
- [x] إضافة حالات للطلبات (pending, approved, rejected)
- [x] صفحة رفع طلب قضية للأعضاء
- [x] صفحة مراجعة الطلبات للـ Officers و Admins
- [x] نظام الموافقة/الرفض مع تحويل الطلب إلى قضية رسمية
- [x] إشعارات للعضو عند الموافقة أو الرفض (عبر صفحة طلباتي)
